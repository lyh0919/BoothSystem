@model BoothModel.Models.UserInfo

@{
    Layout = null;
}

 <!DOCTYPE html>
<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/layuiadmin/layui/layui.js"></script>
<link href="~/layuiadmin/layui/css/layui.css" rel="stylesheet" />
<script src="~/layuiadmin/jquery.unobtrusive-ajax.js"></script>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>编辑租户表</title>
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/layuiadmin/layui/layui.js"></script>
    <link href="~/layuiadmin/layui/css/layui.css" rel="stylesheet" />
</head>
<body>
    <form class="layui-form">
        <div class="layui-form-item">
            <label class="layui-form-label">租户名称：</label>
            <div class="layui-input-block">
                <input type="text" name="MemName" id="MemName" lay-verify="title" autocomplete="off" placeholder="填写租户名称5-15个字" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">关联会员：</label>
            <div class="layui-input-block">
                <input type="text" name="memid" id="memid" lay-verify="title" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">联系电话：</label>
            <div class="layui-input-block">
                <input type="text" name="UserPhone" id="UserPhone" lay-verify="title" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">联系地址：</label>
            <div class="layui-input-block">
                <select id="MemAddress1">
                    <option>-选择省份-</option>
                    <option>-安徽省-</option>
                    <option>-河南省-</option>
                    <option>-山西省-</option>
                    <option>-湖南省-</option>
                </select>
                <select id="MemAddress2">
                    <option>-选择市区-</option>
                    <option>-阜阳市-</option>
                    <option>-合肥市-</option>
                    <option>-郑州市-</option>
                    <option>-武汉市-</option>
                </select>
                <select id="MemAddress3">
                    <option>-选择县区-</option>
                    <option>-太和县-</option>
                    <option>-临泉县-</option>
                    <option>-奉贤区-</option>
                    <option>-朝阳区-</option>
                    <option>-奉城区-</option>
                </select>

            </div>
        </div>
     
        <div class="layui-form-item">
            <label class="layui-form-label">状态</label>
            <div class="layui-input-block">
                <input type="radio" name="sex" value="1" title="开启" checked="" />
                <input type="radio" name="sex" value="0" title="关闭" />
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button type="button" class="layui-btn" id="bt" onclick="uptus()">修改</button>
                <button type="reset" class="layui-btn layui-btn-primary">取消</button>
            </div>
        </div>
    </form>
</body>
</html>
<script>
    $(function () {
        GetMem();
    });

    function GetMem() {
        $.get('http://localhost:52229/api/default/showweixins', function (res) {
            $("#memid").empty();
            var html = "";
            $.each(res, function (i, v) {
                html += '<option value="' + v.id + '">' + v.memName + '</option>';
            });
            $("#memid").append(html);
            //对表单重新渲染  复选框、下拉框等
            layui.use('form', function () {
                var form = layui.form;
                form.render();
            });
        });
        var id = this.location.search.replace("?id=", "");
        $.get('http://localhost:52229/api/default/uptus?ids=' + id, function (res) {
            $("#MemName").val(res.memName);
            $("#MemerId").val(res.memerId);
            $("#UserPhone").val(res.userPhone);

            $("#MemAddress").val(res.memAddress);
            $("#MemState").val(res.memState);
        })
 }

    function uptus() {
        var m = {};
        m.UserName = $("#UserName").val();
        m.MemerId = $('select[name="memid"] option:selected').val();
        m.UserPhone = $("#UserPhone").val();
        //地址
        var Address = $("#MemAddress1").val() + $("#MemAddress2").val() + $("#MemAddress3").val();
        m.UserAddress = Address;
        //状态
        m.UserState = $("input[name='sex']:checked").val();
        $.ajax({
            url: "http://localhost:52229/api/default/UptUs",
            data: JSON.stringify(m),
            dataType: "json",
            type: "post",
            contentType: "application/json",
            success: function (res) {
                if (res > 0) {
                    alert("修改成功");

                }
                else {
                    alert("修改失败");
                }
            }
        })
    }

</script>























